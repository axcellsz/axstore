<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>Dashboard</title>

  <link rel="stylesheet" href="/index.css" />
  <script src="/index.js" defer></script>
</head>
<body>

  <!-- ALERT GLOBAL -->
  <div id="alert" class="alert" style="display:none;"></div>

  <!-- TOMBOL PROFILE (POJOK KANAN ATAS) -->
  <button
    id="profile-fab"
    class="profile-btn"
    onclick="openProfilePanel()"
    type="button"
  >
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none"
         stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M20 21v-2a4 4 0 0 0-3-3.87"></path>
      <path d="M4 21v-2a4 4 0 0 1 3-3.87"></path>
      <circle cx="12" cy="7" r="4"></circle>
    </svg>
  </button>

  <!-- DASHBOARD UTAMA (sederhana, tanpa detail profil) -->
  <div class="card" id="card-dashboard">
    <h1>Halo, selamat datang!</h1>
    <p id="welcome"></p>
  </div>

  <!-- PANEL SLIDE PROFIL DARI KANAN -->
  <div id="profile-panel" class="profile-panel">
    <div class="profile-panel-header">
      <h2>Profil</h2>
      <button id="btn-close-profile" class="profile-panel-close" type="button">Ã—</button>
    </div>

    <!-- HEADER: FOTO + USERNAME + WHATSAPP -->
    <div class="profile-header-row">
      <!-- BLOK AVATAR + TOMBOL -->
      <div class="profile-avatar-block">
        <div id="profile-avatar" class="profile-avatar">
          <img id="profile-avatar-img" alt="Foto profil" />
          <span id="profile-avatar-initial"></span>
        </div>

        <button
          id="btn-change-photo"
          type="button"
        >
          Ubah foto
        </button>
      </div>

      <!-- TEKS DI SAMPING AVATAR -->
      <div class="profile-header-text">
        <div class="profile-header-username" id="profile-username-top"></div>
        <div class="profile-header-whatsapp" id="profile-whatsapp-top"></div>
      </div>
    </div>

    <!-- INPUT FILE (DISEMBUNYIKAN, DIPICU OLEH TOMBOL DI ATAS) -->
    <input
      type="file"
      accept="image/*"
      id="profile-photo-input"
      style="display:none;"
    />

    <!-- SPASI KECIL LALU TOMBOL EDIT PROFIL -->
    <button
      type="button"
      class="btn-primary"
      id="btn-open-complete-profile"
      style="margin-top:20px;"
    >
      Lengkapi / edit data diri
    </button>

    <!-- AREA PROFIL LENGKAP (MUNCUL JIKA profileCompleted = true) -->
    <div id="profile-extra" class="profile-extra">

      <!-- CARD SISA KUOTA -->
      <div id="profile-quota-card" class="profile-quota-card" style="display:none;">
        <div class="quota-title">Sisa kuota</div>
        <div class="quota-value" id="quota-value">-</div>
        <!-- tambahan: masa berlaku kuota -->
        <div class="quota-exp" id="quota-exp"></div>
      </div>

      <!-- LIST DETAIL PROFIL -->
      <div id="profile-detail-list" class="profile-detail-list" style="display:none;">
        <div class="detail-row">
          <div class="detail-label">Nama lengkap</div>
          <div class="detail-value" id="detail-fullName">-</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Email</div>
          <div class="detail-value" id="detail-email">-</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Nomor XL</div>
          <div class="detail-value" id="detail-nomorXL">-</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Jenis kuota</div>
          <div class="detail-value" id="detail-jenisKuota">-</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Alamat</div>
          <div class="detail-value" id="detail-alamat">-</div>
        </div>
        <div class="detail-row">
          <div class="detail-label">Status profil</div>
          <!-- pakai id lama info-status supaya JS tetap bisa -->
          <div class="detail-value" id="info-status">-</div>
        </div>
      </div>
    </div>

    <!-- TOMBOL KELUAR DI PALING BAWAH -->
    <button
      type="button"
      class="btn-secondary"
      onclick="doLogout()"
      style="margin-top:16px;"
    >
      Keluar
    </button>
  </div>

  <!-- BACKDROP GELAP DI BELAKANG PANEL PROFIL -->
  <div id="profile-panel-backdrop" class="profile-panel-backdrop"></div>

  <!-- CARD LENGKAPI PROFIL -->
  <div class="card" id="card-complete-profile" style="display:none;">
    <h1>Lengkapi data diri</h1>
    <p id="profile-hint">Masukan informasi dengan benar</p>

    <form id="form-complete-profile">
      <label>Nama lengkap</label>
      <input type="text" name="fullName" id="fullName" class="input" required />

      <label>Email</label>
      <input type="email" name="email" id="email" class="input" />

      <label>Nomor XL (kartu data/kuota)</label>
      <input type="number" name="nomorXL" id="nomorXL" class="input" />

      <label>Jenis kuota</label>
      <select name="jenisKuota" id="jenisKuota" class="input" required>
        <option value="">-- Pilih jenis kuota --</option>
        <option value="vpn">VPN</option>
        <option value="akrab">Akrab</option>
        <option value="reguler">Reguler</option>
      </select>

      <label>Alamat</label>
      <input type="text" name="alamat" id="alamat" class="input" />

      <div class="row-2col">
        <div class="col">
          <label>RT</label>
          <input type="number" name="rt" id="rt" class="input" />
        </div>
        <div class="col">
          <label>RW</label>
          <input type="number" name="rw" id="rw" class="input" />
        </div>
      </div>

      <label>Desa</label>
      <input type="text" name="desa" id="desa" class="input" />

      <label>Kecamatan</label>
      <input type="text" name="kecamatan" id="kecamatan" class="input" />

      <label>Kabupaten</label>
      <input type="text" name="kabupaten" id="kabupaten" class="input" />

      <label>Provinsi</label>
      <input type="text" name="provinsi" id="provinsi" class="input" />

      <button type="submit" class="btn-primary" style="margin-top:12px;">
        Simpan
      </button>

      <button
        type="button"
        class="btn-secondary"
        style="margin-top:8px;"
        onclick="backToDashboard()"
      >
        Batal
      </button>
    </form>
  </div>

</body>
</html>
